<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Game</title>
  <style>
    #container {
      width: 100%;
      height: 100vh;
      background: #000 url("https://mir-s3-cdn-cf.behance.net/project_modules/disp/32738910160405.560e04a43f728.jpg") no-repeat;
      background-size: cover;
      position: relative;
      overflow: hidden;
    }

    .moon {
      animation: anim 35s linear infinite;
      width: 40px;
      height: 40px;
      position: absolute;
      top: 45%;
      left: 80%;
      transform: translate(-50%, -50%);
      border: 0;
    }



    @keyframes anim {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }

    .spaceship {
      position: absolute;
      top: 80%;
      left: 45%;
      width: 300px;
    }

    #ufo {
      width: 90px;
      height: 90px;
      position: absolute;
      top: 50%;
      left: 85%;
      animation: an 63.4s linear infinite;
    }

    .ufo1 {
      width: 90px;
      height: 90px;
      position: absolute;
      top: 35%;
      left: 85%;
      animation: an 3.7s linear infinite;
    }

    .ufo2 {
      width: 90px;
      height: 90px;
      position: absolute;
      top: 10%;
      right: 5%;
      animation: and 3.9s linear infinite;
    }

    .ufo3 {
      width: 90px;
      height: 90px;
      position: absolute;
      top: 16%;
      right: 5%;
      animation: and 3.8s linear infinite;
    }

    .ufo4 {
      width: 90px;
      height: 90px;
      position: absolute;
      top: 60%;
      right: 5%;
      animation: and 4.8s linear infinite;
    }

    #blast {
      position: absolute;
      display: none;
      width: 300px;
      top: 50%;
      left: 10%; // animation: light 5s linear infinite;
    }



    @keyframes an {
      0% {
        left: 30px;
      }
      50% {
        transform: rotate(20deg);
      }
      100% {
        transform: rotate(0deg);
      }
    }

    @keyframes and {
      0% {
        right: 30px;
      }

      100% {
        right: 900px;
      }
    }

    @keyframes light {
      0% {
        transform: scale(0.9);
      }

      100% {
        transform: scale(1.9);
      }
    }

    #animate {
      width: 80px;
      position: absolute;
      animation: light 5s linear infinite;
    }

    #astro {
      width: 40px;
      position: absolute;
      top: 7%;
      left: 4%;
      transform: translate(-50%, -50%);
    }

    img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
    }
  </style>
</head>

<body>
  <div id="container">
    <div id="animate"><img src="http://4.bp.blogspot.com/-2fdvlWWJHBA/U6X6egN1DFI/AAAAAAAAOi8/IlZljrF26KU/s1600/Raio+de+luz+6+-+Edi%C3%A7%C3%A3o+Blog+PNG+Free.png"
        alt=""></div>
    <div class="moon">
      <img src="http://www.sacredearthandsky.org/wp-content/uploads/2015/08/Full_Moon_Luc_Viatour.jpg" alt="">
    </div>
    <div id="astro">
      <img src="https://intenseplugin.com/wp-content/uploads/2014/06/Astronaut.png" alt="">
    </div>

    <div class="spaceship">
      <img src="https://i0.wp.com/whalesonggames.com/tib/media/iOS/Carrier/Spaceship%20Station%204_0@2x.png" alt="">
    </div>
    <div id="blast">
      <img src="http://www.pngmart.com/files/4/Atomic-Explosion-Transparent-Background.png" alt="">
    </div>
    <div id="ufo">
      <img src="http://freepngimages.com/wp-content/uploads/2015/08/ufo-spaceship.png" alt="">
    </div>
    <div class="ufo1">
      <img src="http://freepngimages.com/wp-content/uploads/2015/08/ufo-spaceship.png" alt="">
    </div>
    <div class="ufo4">
      <img src="http://freepngimages.com/wp-content/uploads/2015/08/ufo-spaceship.png" alt="">
    </div>
    <div class="ufo2">
      <img src="http://freepngimages.com/wp-content/uploads/2015/08/ufo-spaceship.png" alt="">
    </div>
    <div class="ufo3">
      <img src="http://freepngimages.com/wp-content/uploads/2015/08/ufo-spaceship.png" alt="">
    </div>
  </div>
  <script>
    // var container = document.querySelector("#container");
    // container.addEventListener("click",function(){
    //   var elem = document.getElementById("animate");
    //   var pos = 0;
    //   var id = setInterval(move, 5);
    //   function move() {
    //     if (pos == 400) {
    //       clearInterval(id);
    //     } else {
    //       pos++;
    //       elem.style.top = pos + 'px';
    //       elem.style.left = pos + 'px';
    //     }
    //   }
    // });

    // var moon = document.querySelector(".moon");
    // moon.addEventListener("click",function(){
    //   var meteor = document.getElementById("animate");
    //   var spaceship = document.querySelector(".spaceship");
    //   var blast = document.querySelector(".blast");
    //   var pos = 0;
    //   var id = setInterval(move, 5);
    //   function move() {
    //     if (pos == 400 ) {
    //       clearInterval(id);
    //     } else {
    //       pos++;
    //       meteor.style.top = pos + 'px';
    //       meteor.style.left = pos + 'px';
    //     }
    //   }
    // });

    setInterval(movePlane, 20);
    var keys = {}

    $(document).keydown(function (e) {
      keys[e.keyCode] = true;
    });

    $(document).keyup(function (e) {
      delete keys[e.keyCode];
    });


    function movePlane() {
      for (var direction in keys) {
        if (!keys.hasOwnProperty(direction)) continue;
        if (direction == 37) {
          $("#astro").animate({
            left: "-=5"
          }, 0);
        }
        if (direction == 38) {
          $("#astro").animate({
            top: "-=5"
          }, 0);
        }
        if (direction == 39) {
          $("#astro").animate({
            left: "+=5"
          }, 0);
        }
        if (direction == 40) {
          $("#astro").animate({
            top: "+=5"
          }, 0);
        }
      }
    }

    const astro = $('#astro');
    const ufo = $('#ufo');

    function getPositions(box) {
      var $box = $(box);
      var pos = $box.position();
      var width = $box.width();
      var height = $box.height();
      return [
        [pos.left, pos.left + width],
        [pos.top, pos.top + height]
      ];

    }

    function comparePositions(p1, p2) {
      var x1 = p1[0] < p2[0] ? p1 : p2;
      var x2 = p1[0] < p2[0] ? p2 : p1;
      return x1[1] > x2[0] || x1[0] === x2[0] ? true : false;
    }

    function checkCollisions() {
      var box = $(".bomb")[0];
      var pos = getPositions(box);
      console.log(box);

      var pos2 = getPositions(this);
      var horizontalMatch = comparePositions(pos[0], pos2[0]);
      var verticalMatch = comparePositions(pos[1], pos2[1]);
      var match = horizontalMatch && verticalMatch;
      if (match) {
        $("#blast").show();
      }
    }
  </script>
</body>

</html>
